/*! SlotMachine - v1.0.0 - 2014-06-23
* https://github.com/josex2r/jQuery-SlotMachine
* Copyright (c) 2014 Jose Luis Represa; Licensed MIT */
!function(a,b,c,d){a(c).ready(function(){a("filter#slotMachineBlurSVG").length<=0&&a("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg"><filter id="slotMachineBlurFilterFast"><feGaussianBlur stdDeviation="5" /></filter></svg>'),a("filter#slotMachineBlurSVG").length<=0&&a("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg"><filter id="slotMachineBlurFilterMedium"><feGaussianBlur stdDeviation="3" /></filter></svg>'),a("filter#slotMachineBlurSVG").length<=0&&a("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg"><filter id="slotMachineBlurFilterSlow"><feGaussianBlur stdDeviation="1" /></filter></svg>'),a("mask#slotMachineFadeSVG").length<=0&&a("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg"><mask id="slotMachineFadeMask" maskUnits="objectBoundingBox" maskContentUnits="objectBoundingBox"><linearGradient id="slotMachineFadeGradient" gradientUnits="objectBoundingBox" x="0" y="0"><stop stop-color="white" stop-opacity="0" offset="0"></stop><stop stop-color="white" stop-opacity="1" offset="0.25"></stop><stop stop-color="white" stop-opacity="1" offset="0.75"></stop><stop stop-color="white" stop-opacity="0" offset="1"></stop></linearGradient><rect x="0" y="-1" width="1" height="1" transform="rotate(90)" fill="url(#slotMachineFadeGradient)"></rect></mask></svg>'),a("body").append("<style>.slotMachineBlurFast{-webkit-filter: blur(5px);-moz-filter: blur(5px);-o-filter: blur(5px);-ms-filter: blur(5px);filter: blur(5px);filter: url(#slotMachineBlurFilterFast);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='5')}.slotMachineBlurMedium{-webkit-filter: blur(3px);-moz-filter: blur(3px);-o-filter: blur(3px);-ms-filter: blur(3px);filter: blur(3px);filter: url(#slotMachineBlurFilterMedium);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='3')}.slotMachineBlurSlow{-webkit-filter: blur(1px);-moz-filter: blur(1px);-o-filter: blur(1px);-ms-filter: blur(1px);filter: blur(1px);filter: url(#slotMachineBlurFilterSlow);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='1')}.slotMachineGradient{-webkit-mask-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(0,0,0,0)), color-stop(25%, rgba(0,0,0,1)), color-stop(75%, rgba(0,0,0,1)), color-stop(100%, rgba(0,0,0,0)) );mask: url(#slotMachineFadeMask);}</style>")}),"function"!=typeof a.easing.easeOutBounce&&a.extend(a.easing,{easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?7.5625*d*b*b+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c}}),a.fn.slotMachine=function(c){function e(b){for(var c=0,d=0;b>d;d++)c+=a(w.get(d)).outerHeight();return-c}function f(){var a;do a=Math.floor(Math.random()*w.length);while(a===C.index&&a>=0);var b={index:a,el:w.get(a)};return b}function g(){var a={};if(null!==c.randomize&&"function"==typeof c.randomize){var b=c.randomize(C.index);(0>b||b>=w.length)&&(b=0),a={index:b,el:w.get(b)}}else a=f();return a}function h(){var a=C.index-1<0?w.length-1:C.index-1,b={index:a,el:w.get(a)};return b}function i(){var a=C.index+1<w.length?C.index+1:0,b={index:a,el:w.get(a)};return b}function j(){return C}function k(a){C=a}function l(a,b){switch(v.add(w).removeClass("slotMachineBlurFast slotMachineBlurMedium slotMachineBlurSlow"),a){case"fast":w.addClass("slotMachineBlurFast");break;case"medium":w.addClass("slotMachineBlurMedium");break;case"slow":w.addClass("slotMachineBlurSlow")}b!==!0||"stop"===a?v.add(w).removeClass("slotMachineGradient"):v.add(w).addClass("slotMachineGradient")}function m(){t.css("margin-top",e(C.index))}function n(a){B=!0;var b=c.delay;a===d?(l("fast",!0),b/=2,q()?y=t.animate({marginTop:u},b,function(){y=null,t.css("margin-top",0)}):(l("stop"),m()),setTimeout(function(){z===!1&&n()},b+25)):a>=1?(a>1?(l("fast",!0),b/=2):l("medium",!0),q()?y=t.animate({marginTop:u},b,function(){y=null,t.css("margin-top",0)}):(l("stop"),m()),setTimeout(function(){n(a-1)},b+25)):p(!0)}function o(){"function"==typeof A&&(A(v,C),A=null)}function p(b,d){null!==y&&y.stop();var h;if(h="function"==typeof d?d():null!==c.randomize&&"function"==typeof c.randomize?g():c.repeat?i():f(),b===!0||1>=b){l("slow",!0);var j=e(h.index);0===h.index&&t.css("margin-top",-a(h.el).height()/2);var p=75*w.length-h.index;q()?(k(h),t.animate({marginTop:j},p,"easeOutBounce",o)):(l("stop"),m()),setTimeout(function(){l("stop"),B=!1},p+25)}else n(b||3)}function q(){var c=v.offset().top>a(b).scrollTop()+a(b).height(),d=a(b).scrollTop()>v.height()+v.offset().top;return!c&&!d}function r(a){z===!1&&(a=a===d?1:c.repeat+1e3,x=setTimeout(function(){z===!1&&n(3),x=r(a)},a))}var s={active:0,delay:200,repeat:!1,randomize:null};c=a.extend(s,c);var t,u,v=a(this),w=v.children(),x=null,y=null,z=!1,A=null,B=!1,C={index:c.active,el:w.get(c.active)};return v.css("overflow","hidden"),w.wrapAll("<div class='slotMachineContainer' />"),t=v.find(".slotMachineContainer"),u=-t.height(),t.css("margin-top",e(c.active)),c.repeat!==!1&&r(),v.shuffle=function(a,b){z=!1,A=b,n(a)},v.stop=function(a){z=!0,c.repeat!==!1&&null!==x&&clearTimeout(x),p(a)},v.prev=function(){p(!0,h)},v.next=function(){p(!0,i)},v.active=function(){return j()},v.isRunning=function(){return B},v.auto=r,v}}(jQuery,window,document);